<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>404 Page Design Explorer — KP Infotech</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0a;
      --bg-secondary: #0f0f0f;
      --bg-tertiary: #161616;
      --text-primary: #ffffff;
      --text-secondary: #6b6b6b;
      --text-muted: #3a3a3a;
      --accent: #c9a87c;
      --border: #1a1a1a;
      --border-light: #2a2a2a;
      --ui-bg: #111;
      --ui-border: #222;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Outfit', system-ui, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
    }

    /* Top Header */
    .header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 1.25rem;
      font-weight: 500;
      color: var(--accent);
    }

    .header-subtitle {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* Main Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      min-height: calc(100vh - 60px);
    }

    /* Sidebar Controls */
    .sidebar {
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: 20px;
      overflow-y: auto;
    }

    .control-section {
      margin-bottom: 24px;
    }

    .section-title {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-muted);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title::before {
      content: '';
      width: 20px;
      height: 1px;
      background: var(--accent);
    }

    /* Variation Selector */
    .variation-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .variation-btn {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      padding: 12px 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .variation-btn:hover {
      border-color: var(--border-light);
    }

    .variation-btn.active {
      border-color: var(--accent);
      background: rgba(201, 168, 124, 0.05);
    }

    .variation-btn .letter {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      color: var(--accent);
      display: block;
      margin-bottom: 4px;
    }

    .variation-btn .name {
      font-size: 0.7rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Selection Tracker */
    .selection-tracker {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      padding: 12px;
      margin-top: 16px;
    }

    .selection-tracker label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 6px 0;
    }

    .selection-tracker input[type="checkbox"] {
      accent-color: var(--accent);
      width: 14px;
      height: 14px;
    }

    .notes-area {
      width: 100%;
      background: var(--bg-primary);
      border: 1px solid var(--border);
      color: var(--text-primary);
      font-family: 'Outfit', sans-serif;
      font-size: 0.8rem;
      padding: 8px;
      margin-top: 12px;
      resize: vertical;
      min-height: 60px;
    }

    .notes-area::placeholder {
      color: var(--text-muted);
    }

    /* Content Area */
    .content-area {
      display: flex;
      flex-direction: column;
    }

    /* Responsive Preview Tabs */
    .preview-header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .viewport-tabs {
      display: flex;
      gap: 4px;
    }

    .viewport-tab {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-secondary);
      padding: 8px 16px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .viewport-tab:hover {
      border-color: var(--border-light);
      color: var(--text-primary);
    }

    .viewport-tab.active {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--bg-primary);
    }

    .viewport-tab svg {
      width: 16px;
      height: 16px;
    }

    .current-variation {
      margin-left: auto;
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .current-variation span {
      color: var(--accent);
    }

    /* Preview Container */
    .preview-container {
      flex: 1;
      padding: 24px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      overflow: auto;
      background:
        radial-gradient(circle at 50% 50%, rgba(201, 168, 124, 0.02) 0%, transparent 50%),
        var(--bg-primary);
    }

    .preview-frame {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      transition: width 0.3s ease;
      overflow: hidden;
      position: relative;
    }

    .preview-frame.desktop {
      width: 100%;
      max-width: 1200px;
      height: 700px;
    }

    .preview-frame.tablet {
      width: 768px;
      height: 700px;
    }

    .preview-frame.mobile {
      width: 375px;
      height: 700px;
    }

    .frame-label {
      position: absolute;
      top: -24px;
      left: 0;
      font-size: 0.65rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* 404 Page Preview Styles */
    .page-404 {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .page-404 .big-404 {
      font-family: 'Playfair Display', serif;
      font-weight: 500;
      line-height: 1;
      margin-bottom: 24px;
    }

    .page-404 h2 {
      font-family: 'Playfair Display', serif;
      font-weight: 500;
      margin-bottom: 16px;
    }

    .page-404 p {
      color: var(--text-secondary);
      font-weight: 300;
      max-width: 400px;
      margin-bottom: 32px;
    }

    .page-404 .btn-primary {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 28px;
      border: 1px solid var(--accent);
      background: transparent;
      color: var(--text-primary);
      font-family: 'Outfit', sans-serif;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .page-404 .btn-primary:hover {
      background: var(--accent);
      color: var(--bg-primary);
    }

    .page-404 .btn-primary svg {
      width: 16px;
      height: 16px;
    }

    /* Variation B - Editorial */
    .variation-b .decorative-line {
      position: absolute;
      width: 1px;
      height: 120px;
      background: var(--border-light);
    }

    .variation-b .line-left {
      left: 15%;
      top: 20%;
    }

    .variation-b .line-right {
      right: 15%;
      bottom: 20%;
    }

    .variation-b .nav-hints {
      display: flex;
      gap: 24px;
      margin-top: 24px;
    }

    .variation-b .nav-hints a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.85rem;
      transition: color 0.2s ease;
    }

    .variation-b .nav-hints a:hover {
      color: var(--accent);
    }

    /* Variation C - Helpful Navigation */
    .variation-c .search-placeholder {
      width: 100%;
      max-width: 400px;
      padding: 14px 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 32px;
      text-align: left;
    }

    .variation-c .quick-links {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      max-width: 400px;
      margin-bottom: 24px;
    }

    .variation-c .quick-link {
      padding: 12px 16px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.8rem;
      transition: all 0.2s ease;
    }

    .variation-c .quick-link:hover {
      border-color: var(--accent);
      color: var(--text-primary);
    }

    .variation-c .contact-hint {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .variation-c .contact-hint a {
      color: var(--accent);
      text-decoration: none;
    }

    /* Variation D - Animated */
    .variation-d .big-404 {
      animation: fadeInUp 0.8s ease-out, float 4s ease-in-out infinite;
      animation-delay: 0s, 0.8s;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    .variation-d h2 {
      animation: fadeInUp 0.8s ease-out 0.2s both;
    }

    .variation-d p {
      animation: fadeInUp 0.8s ease-out 0.4s both;
    }

    .variation-d .btn-primary {
      animation: fadeInUp 0.8s ease-out 0.6s both;
    }

    /* Mobile Responsive Adjustments */
    .preview-frame.mobile .page-404 {
      padding: 24px;
    }

    .preview-frame.mobile .big-404 {
      font-size: 6rem !important;
    }

    .preview-frame.mobile h2 {
      font-size: 1.5rem !important;
    }

    .preview-frame.mobile p {
      font-size: 0.9rem !important;
    }

    .preview-frame.mobile .variation-c .quick-links {
      grid-template-columns: repeat(2, 1fr);
    }

    .preview-frame.mobile .variation-b .nav-hints {
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
    }

    .preview-frame.mobile .variation-b .decorative-line {
      display: none;
    }

    /* Tablet Adjustments */
    .preview-frame.tablet .big-404 {
      font-size: 8rem !important;
    }

    /* Prompt Output */
    .prompt-section {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 20px 24px;
    }

    .prompt-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .prompt-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-muted);
    }

    .copy-btn {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-secondary);
      padding: 8px 16px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .copy-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .copy-btn.copied {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--bg-primary);
    }

    .copy-btn svg {
      width: 14px;
      height: 14px;
    }

    .prompt-output {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      padding: 16px;
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.6;
      max-height: 150px;
      overflow-y: auto;
    }

    .prompt-output strong {
      color: var(--accent);
      font-weight: 500;
    }

    /* Responsive Sidebar */
    @media (max-width: 900px) {
      .main-layout {
        grid-template-columns: 1fr;
      }

      .sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border);
        padding: 16px;
      }

      .variation-grid {
        grid-template-columns: repeat(4, 1fr);
      }

      .selection-tracker {
        display: none;
      }

      .preview-frame {
        width: 100% !important;
        max-width: none !important;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div>
      <h1>404 Page Explorer</h1>
      <span class="header-subtitle">KP Infotech Design System</span>
    </div>
  </header>

  <main class="main-layout">
    <aside class="sidebar">
      <div class="control-section">
        <div class="section-title">Select Variation</div>
        <div class="variation-grid">
          <button class="variation-btn active" data-variation="a" onclick="setVariation('a')">
            <span class="letter">A</span>
            <span class="name">Minimal</span>
          </button>
          <button class="variation-btn" data-variation="b" onclick="setVariation('b')">
            <span class="letter">B</span>
            <span class="name">Editorial</span>
          </button>
          <button class="variation-btn" data-variation="c" onclick="setVariation('c')">
            <span class="letter">C</span>
            <span class="name">Helpful</span>
          </button>
          <button class="variation-btn" data-variation="d" onclick="setVariation('d')">
            <span class="letter">D</span>
            <span class="name">Animated</span>
          </button>
        </div>
      </div>

      <div class="control-section">
        <div class="section-title">Track Selections</div>
        <div class="selection-tracker">
          <label>
            <input type="checkbox" id="pref-a"> Variation A — Minimal Typography
          </label>
          <label>
            <input type="checkbox" id="pref-b"> Variation B — Editorial/Creative
          </label>
          <label>
            <input type="checkbox" id="pref-c"> Variation C — Helpful Navigation
          </label>
          <label>
            <input type="checkbox" id="pref-d"> Variation D — Animated/Interactive
          </label>
          <textarea class="notes-area" placeholder="Add notes about your preference..."></textarea>
        </div>
      </div>
    </aside>

    <div class="content-area">
      <div class="preview-header">
        <div class="viewport-tabs">
          <button class="viewport-tab active" data-viewport="desktop" onclick="setViewport('desktop')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
              <line x1="8" y1="21" x2="16" y2="21"></line>
              <line x1="12" y1="17" x2="12" y2="21"></line>
            </svg>
            Desktop
          </button>
          <button class="viewport-tab" data-viewport="tablet" onclick="setViewport('tablet')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>
              <line x1="12" y1="18" x2="12" y2="18"></line>
            </svg>
            Tablet
          </button>
          <button class="viewport-tab" data-viewport="mobile" onclick="setViewport('mobile')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
              <line x1="12" y1="18" x2="12" y2="18"></line>
            </svg>
            Mobile
          </button>
        </div>
        <span class="current-variation">Viewing: <span id="current-var-label">Variation A — Minimal</span></span>
      </div>

      <div class="preview-container">
        <div class="preview-frame desktop" id="preview-frame">
          <span class="frame-label" id="frame-label">1200px</span>
          <div id="preview-content"></div>
        </div>
      </div>

      <div class="prompt-section">
        <div class="prompt-header">
          <span class="prompt-label">Generated Prompt</span>
          <button class="copy-btn" onclick="copyPrompt()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <span id="copy-text">Copy Prompt</span>
          </button>
        </div>
        <div class="prompt-output" id="prompt-output"></div>
      </div>
    </div>
  </main>

  <script>
    const state = {
      variation: 'a',
      viewport: 'desktop',
      preferences: {
        a: false,
        b: false,
        c: false,
        d: false
      },
      notes: ''
    };

    const variations = {
      a: {
        name: 'Minimal Typography',
        description: 'Large "404" in Playfair Display, clean message, single CTA, lots of whitespace'
      },
      b: {
        name: 'Editorial/Creative',
        description: 'Creative layout with witty message, navigation hints, subtle decorative lines'
      },
      c: {
        name: 'Helpful Navigation',
        description: 'Standard message with search placeholder and quick links grid'
      },
      d: {
        name: 'Animated/Interactive',
        description: 'Subtle CSS animations on 404, fade-in effects, floating animation'
      }
    };

    const viewportSizes = {
      desktop: { width: '100%', maxWidth: '1200px', label: '1200px' },
      tablet: { width: '768px', maxWidth: '768px', label: '768px' },
      mobile: { width: '375px', maxWidth: '375px', label: '375px' }
    };

    function setVariation(v) {
      state.variation = v;

      document.querySelectorAll('.variation-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.variation === v);
      });

      updateAll();
    }

    function setViewport(vp) {
      state.viewport = vp;

      document.querySelectorAll('.viewport-tab').forEach(tab => {
        tab.classList.toggle('active', tab.dataset.viewport === vp);
      });

      const frame = document.getElementById('preview-frame');
      frame.className = 'preview-frame ' + vp;

      document.getElementById('frame-label').textContent = viewportSizes[vp].label;

      updateAll();
    }

    function renderPreview() {
      const container = document.getElementById('preview-content');
      let html = '';

      switch (state.variation) {
        case 'a':
          html = `
            <div class="page-404 variation-a">
              <div class="big-404" style="font-size: 10rem; color: var(--accent); opacity: 0.9;">404</div>
              <h2 style="font-size: 2rem; color: var(--text-primary);">Page not found</h2>
              <p>The page you're looking for doesn't exist or has been moved.</p>
              <button class="btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="19" y1="12" x2="5" y2="12"></line>
                  <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                Back to Home
              </button>
            </div>
          `;
          break;

        case 'b':
          html = `
            <div class="page-404 variation-b">
              <div class="decorative-line line-left"></div>
              <div class="decorative-line line-right"></div>
              <div class="big-404" style="font-size: 8rem; color: var(--text-muted); opacity: 0.3;">404</div>
              <h2 style="font-size: 2.5rem; color: var(--text-primary); margin-top: -20px;">Lost in the digital void</h2>
              <p style="font-style: italic;">Looks like this page took a different path. Let's get you back on track.</p>
              <button class="btn-primary">
                Return Home
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </button>
              <nav class="nav-hints">
                <a href="#">Home</a>
                <a href="#">Work</a>
                <a href="#">Services</a>
                <a href="#">Contact</a>
              </nav>
            </div>
          `;
          break;

        case 'c':
          html = `
            <div class="page-404 variation-c">
              <div class="big-404" style="font-size: 6rem; color: var(--accent);">404</div>
              <h2 style="font-size: 1.75rem; color: var(--text-primary);">Page not found</h2>
              <p>We couldn't find what you're looking for. Try searching or explore our site.</p>
              <div class="search-placeholder">
                <span>Search our site...</span>
              </div>
              <div class="quick-links">
                <a href="#" class="quick-link">Home</a>
                <a href="#" class="quick-link">Services</a>
                <a href="#" class="quick-link">Work</a>
                <a href="#" class="quick-link">Insights</a>
                <a href="#" class="quick-link">About</a>
                <a href="#" class="quick-link">Contact</a>
              </div>
              <p class="contact-hint">Or <a href="#">contact us</a> if you need help</p>
            </div>
          `;
          break;

        case 'd':
          html = `
            <div class="page-404 variation-d">
              <div class="big-404" style="font-size: 10rem; color: var(--accent);">404</div>
              <h2 style="font-size: 2rem; color: var(--text-primary);">Page not found</h2>
              <p>This page seems to have wandered off. Let's head back home.</p>
              <button class="btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                Back to Home
              </button>
            </div>
          `;
          break;
      }

      container.innerHTML = html;
      document.getElementById('current-var-label').textContent = `Variation ${state.variation.toUpperCase()} — ${variations[state.variation].name}`;
    }

    function updatePrompt() {
      const v = variations[state.variation];
      const checkedPrefs = Object.entries(state.preferences)
        .filter(([_, checked]) => checked)
        .map(([key, _]) => `${key.toUpperCase()}`);

      let prompt = `Create a <strong>404 error page</strong> for KP Infotech (kpinfo.tech) using <strong>Variation ${state.variation.toUpperCase()}: ${v.name}</strong>.\n\n`;

      prompt += `<strong>Design approach:</strong> ${v.description}.\n\n`;

      prompt += `<strong>Design system:</strong>\n`;
      prompt += `• Background: #0a0a0a (primary), #0f0f0f (secondary)\n`;
      prompt += `• Text: #ffffff (primary), #6b6b6b (secondary)\n`;
      prompt += `• Accent: #c9a87c (warm gold)\n`;
      prompt += `• Fonts: Playfair Display (headlines), Outfit (body)\n\n`;

      switch (state.variation) {
        case 'a':
          prompt += `<strong>Elements:</strong>\n`;
          prompt += `• Large "404" in Playfair Display, accent color\n`;
          prompt += `• "Page not found" subheading\n`;
          prompt += `• Brief message about the missing page\n`;
          prompt += `• Ghost button "Back to Home" with left arrow\n`;
          prompt += `• Full viewport height, vertically centered\n`;
          prompt += `• Generous whitespace, minimal elements\n`;
          break;

        case 'b':
          prompt += `<strong>Elements:</strong>\n`;
          prompt += `• "404" integrated creatively (large, muted/background)\n`;
          prompt += `• Witty headline: "Lost in the digital void"\n`;
          prompt += `• Italicized subtext with personality\n`;
          prompt += `• CTA button with right arrow\n`;
          prompt += `• Navigation hints: Home, Work, Services, Contact\n`;
          prompt += `• Subtle decorative vertical lines (left/right)\n`;
          break;

        case 'c':
          prompt += `<strong>Elements:</strong>\n`;
          prompt += `• Standard 404 message\n`;
          prompt += `• Search bar placeholder (non-functional for now)\n`;
          prompt += `• 3x2 quick links grid: Home, Services, Work, Insights, About, Contact\n`;
          prompt += `• Contact hint at bottom with accent link\n`;
          prompt += `• Helpful, utility-focused approach\n`;
          break;

        case 'd':
          prompt += `<strong>Elements:</strong>\n`;
          prompt += `• "404" with CSS animation (fade-in + floating effect)\n`;
          prompt += `• Staggered fade-in for h2, p, and button\n`;
          prompt += `• Home icon in CTA button\n`;
          prompt += `• Minimal layout, animation is the focus\n`;
          prompt += `• Use @keyframes only, no JS required\n`;
          break;
      }

      prompt += `\n<strong>Requirements:</strong>\n`;
      prompt += `• Full viewport height, vertically centered content\n`;
      prompt += `• Mobile responsive (adjust font sizes and layouts)\n`;
      prompt += `• Should feel premium and intentional, not generic\n`;
      prompt += `• Respect prefers-reduced-motion for Variation D\n`;

      if (checkedPrefs.length > 0) {
        prompt += `\n<strong>User preferences noted:</strong> ${checkedPrefs.join(', ')}`;
      }

      const notes = document.querySelector('.notes-area')?.value;
      if (notes && notes.trim()) {
        prompt += `\n\n<strong>Additional notes:</strong> ${notes.trim()}`;
      }

      document.getElementById('prompt-output').innerHTML = prompt;
    }

    function copyPrompt() {
      const prompt = document.getElementById('prompt-output').innerText;
      navigator.clipboard.writeText(prompt).then(() => {
        const btn = document.querySelector('.copy-btn');
        const text = document.getElementById('copy-text');
        btn.classList.add('copied');
        text.textContent = 'Copied!';

        setTimeout(() => {
          btn.classList.remove('copied');
          text.textContent = 'Copy Prompt';
        }, 2000);
      });
    }

    function updateAll() {
      renderPreview();
      updatePrompt();
    }

    // Initialize preference checkboxes
    document.querySelectorAll('.selection-tracker input[type="checkbox"]').forEach(cb => {
      cb.addEventListener('change', (e) => {
        const key = e.target.id.replace('pref-', '');
        state.preferences[key] = e.target.checked;
        updatePrompt();
      });
    });

    // Initialize notes textarea
    document.querySelector('.notes-area')?.addEventListener('input', () => {
      updatePrompt();
    });

    // Initial render
    updateAll();
  </script>
</body>
</html>
