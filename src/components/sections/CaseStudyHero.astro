---
import PageHero from './PageHero.astro';
import SectionLabel from '../ui/SectionLabel.astro';
import Button from '../ui/Button.astro';

interface Props {
  title: string;
  client?: string;
  year?: string;
  services?: Array<{ title: string; slug: { current: string } }>;
  heroImageUrl?: string;
  slug?: string;
}

const { title, client, year, services, heroImageUrl, slug } = Astro.props;
---

<PageHero image={heroImageUrl} variant="inner" imageTransitionName={slug ? `work-hero-${slug}` : undefined}>
  <nav class="case-hero__breadcrumb" aria-label="Breadcrumb">
    <a href="/">Home</a>
    <span class="case-hero__sep">/</span>
    <a href="/work/">Work</a>
    <span class="case-hero__sep">/</span>
    <span class="case-hero__current">{title}</span>
  </nav>

  <SectionLabel text="Case Study" />

  <h1 style={slug ? `view-transition-name: work-title-${slug}` : undefined}>{title}</h1>

  {(client || year) && (
    <div class="case-hero__meta">
      {client && <span class="case-hero__meta-item">{client}</span>}
      {client && year && <span class="case-hero__meta-sep">&mdash;</span>}
      {year && <span class="case-hero__meta-item">{year}</span>}
    </div>
  )}

  {services && services.length > 0 && (
    <div class="case-hero__tags">
      {services.map((service) => (
        <a href={`/services/${service.slug.current}/`} class="case-hero__tag">
          {service.title}
        </a>
      ))}
    </div>
  )}

  <div class="page-hero__actions">
    <Button href="/contact/" variant="primary">Discuss Your Project</Button>
    <Button href="/work/" variant="text">All Work</Button>
  </div>
</PageHero>

<style>
  .case-hero__breadcrumb {
    font-family: var(--font-body);
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--text-secondary);
  }

  .case-hero__breadcrumb a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.2s;
  }

  .case-hero__breadcrumb a:hover {
    color: var(--accent);
  }

  .case-hero__sep {
    margin: 0 8px;
    color: var(--text-muted);
  }

  .case-hero__current {
    color: var(--accent);
  }

  .case-hero__meta {
    display: flex;
    align-items: center;
    gap: 0;
    font-family: var(--font-body);
    font-size: 0.9375rem;
    font-weight: 300;
    color: var(--text-secondary);
  }

  .case-hero__meta-sep {
    margin: 0 0.75rem;
    color: var(--text-muted);
  }

  .case-hero__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .case-hero__tag {
    display: inline-block;
    padding: 6px 14px;
    font-family: var(--font-body);
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--text-secondary);
    border: 1px solid var(--border-light);
    text-decoration: none;
    transition: border-color 0.3s ease, color 0.3s ease;
  }

  .case-hero__tag:hover {
    border-color: var(--accent-dim);
    color: var(--accent);
  }

  @media (max-width: 480px) {
    .case-hero__breadcrumb {
      display: none;
    }
  }
</style>
